feature:
  name: "html_rendering"
  display_name: "HTML Rendering (Template Mixing)"
  version: "1.0.0"
  status: "stable"
  phase: 1
  category: "rendering"

  description: |
    Server-side rendering of mixed HTML and Quantum tags in the same file.
    ColdFusion/PHP-style template mixing where HTML is treated as first-class
    content alongside Quantum control structures.

dependencies:
  features:
    - "databinding"
    - "state_management"
  external:
    - "Flask>=2.3.0"
    - "lxml>=4.9.0"

api:
  ast_nodes:
    - "HTMLNode"
    - "TextNode"
  parser: "src/core/parser.py::_parse_html_node"
  runtime: "src/runtime/renderer.py::HTMLRenderer"

architecture:
  pattern: "Template Mixing (Phase 1)"
  rendering: "Server-Side Rendering (SSR)"
  output: "Static HTML string"

capabilities:
  - "Mix HTML and Quantum tags in same file"
  - "Render standard HTML elements"
  - "Self-closing void elements (br, img, input, etc.)"
  - "HTML attributes with static and dynamic values"
  - "Databinding in text content {variable}"
  - "Databinding in attributes class='{className}'"
  - "Preserve HTML structure and formatting"
  - "No XML namespace required for HTML"

implementation:
  files:
    - "src/core/parser.py (_parse_html_node, _is_html_element)"
    - "src/core/ast_nodes.py (HTMLNode, TextNode)"
    - "src/runtime/renderer.py (_render_html_node, _render_text_node)"
  constants:
    void_elements:
      - "area, base, br, col, embed, hr, img, input"
      - "link, meta, param, source, track, wbr"

testing:
  framework: "pytest"
  markers:
    - "unit"
    - "integration"
    - "phase1"
  coverage:
    lines: "~95%"
    branches: "~90%"
  test_files:
    - "tests/unit/test_renderer.py"
    - "tests/unit/test_parser.py"

examples:
  simple_html: |
    <q:component name="Page">
      <h1>Welcome</h1>
      <p>Hello, World!</p>
    </q:component>

  with_databinding: |
    <q:component name="Greeting">
      <q:set name="userName" value="Daniel" />
      <h1>Welcome, {userName}!</h1>
    </q:component>

  void_elements: |
    <q:component name="Form">
      <input type="text" placeholder="Name" />
      <br />
      <img src="logo.png" alt="Logo" />
    </q:component>

validation:
  - "HTML tags must be properly closed (XML-compliant)"
  - "Void elements can be self-closing"
  - "Attributes must have quoted values"
  - "No DOCTYPE declarations (incompatible with XML parser)"

production_ready: true
stable_since: "2025-01-05"
