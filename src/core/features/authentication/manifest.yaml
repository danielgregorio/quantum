feature:
  name: "authentication"
  display_name: "Authentication & Security (Login/Logout/Permissions)"
  version: "1.0.0"
  status: "planned"
  phase: G
  category: "security"

  description: |
    Built-in authentication system with login/logout, password hashing,
    role-based access control (RBAC), and route protection.

capabilities:
  - "Login action with credential validation"
  - "Logout action with session cleanup"
  - "Password hashing (bcrypt)"
  - "Role-based access control (RBAC)"
  - "require_auth attribute on components"
  - "Permission checking"
  - "Remember me functionality"

examples:
  login: |
    <q:action name="login" method="POST">
      <q:param name="email" type="email" required="true" />
      <q:param name="password" type="string" required="true" />

      <q:query name="user" datasource="db">
        SELECT id, name, role FROM users
        WHERE email=:email AND password=SHA2(:password, 256)
      </q:query>

      <q:if condition="{user.recordCount} > 0">
        <q:set name="session.userId" value="{user.id}" />
        <q:set name="session.userName" value="{user.name}" />
        <q:set name="session.authenticated" value="true" />
        <q:redirect url="/dashboard" flash="Welcome back!" />
      <q:else />
        <q:flash type="error" message="Invalid credentials" />
        <q:redirect url="/login" />
      </q:if>
    </q:action>

  protected_route: |
    <q:component name="Dashboard" require_auth="true">
      <h1>Welcome, {session.userName}!</h1>
    </q:component>

production_ready: false
